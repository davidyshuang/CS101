<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw.io 文件渲染器</title>
    <!-- 引入 bpmn-js 库 -->
    <script src="https://unpkg.com/bpmn-js@10.1.0/dist/bpmn-viewer.production.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; }
        #bpmn-container { 
            width: 100%; 
            height: 100vh; 
            background: #f8f9fa;
        }
    </style>
</head>
<body>
    <div id="bpmn-container"></div>

    <script>
        // 核心配置 ========================================
        const fileName = "bpmndemo.drawio"; // ✨ 修改此处文件名即可
        // ================================================

        // 初始化渲染器
        const viewer = new BpmnJS({
            container: '#bpmn-container'
        });

        // 加载并渲染文件
        async function loadDiagram() {
            try {
                // 1. 获取 Draw.io 文件内容
                const response = await fetch(fileName);
                if (!response.ok) throw new Error(`文件加载失败: ${response.status}`);
                const xml = await response.text();

                // 2. 渲染流程图
                await viewer.importXML(xml);
                viewer.get('canvas').zoom('fit-viewport');
                console.log(`[成功] 已渲染文件: ${fileName}`);
                
            } catch (err) {
                console.error(`[错误] ${err.message}`);
                // 显示错误提示
                document.getElementById('bpmn-container').innerHTML = `
                    <div style="text-align:center; padding:50px; color:#e74c3c;">
                        <h2>渲染失败</h2>
                        <p>${err.message || "请检查文件名或文件格式"}</p>
                        <p>支持文件格式: .drawio 或 BPMN 2.0 XML</p>
                    </div>
                `;
            }
        }

        // 页面加载后自动渲染
        window.onload = loadDiagram;
    </script>
</body>
</html>